(this["webpackJsonpuax-demo"]=this["webpackJsonpuax-demo"]||[]).push([[0],{14:function(e,t,n){e.exports={spacer:"Wallet_spacer__16JB9",wallet:"Wallet_wallet__1Grsq",info:"Wallet_info__YW5pO",value:"Wallet_value__1ayvN",yadd:"Wallet_yadd__yIG7m",block:"Wallet_block__2TL5q",input:"Wallet_input__eiXcK",button:"Wallet_button__V7ThS",buttonLoading:"Wallet_buttonLoading__24opq Wallet_button__V7ThS"}},16:function(e,t,n){e.exports={aside:"Aside_aside__1St8F",stats:"Aside_stats__35-mK",statrow:"Aside_statrow__3S5au",statname:"Aside_statname__3cm0q",childstatname:"Aside_childstatname__V39tL Aside_statname__3cm0q",row:"Aside_row__up8dj",unit:"Aside_unit__1S1A3",value:"Aside_value__1aeVE",valueLoading:"Aside_valueLoading__gVyV0"}},17:function(e,t,n){e.exports={message:"Vote_message__MfV2K",button:"Vote_button__38l8p",buttondisabled:"Vote_buttondisabled__140Kj",buttonvoted:"Vote_buttonvoted__QCPv8"}},20:function(e,t,n){e.exports={twoforms:"ProposeForms_twoforms__2P-en",block:"ProposeForms_block__1NwrZ",input:"ProposeForms_input__2XHaP",button:"ProposeForms_button__2IaXw",buttonLoading:"ProposeForms_buttonLoading__1Bxgp ProposeForms_button__2IaXw"}},25:function(e,t,n){e.exports={wrapper:"App_wrapper__2Rh_f",page:"App_page__CKP-2",desk:"App_desk__2dGs9",main:"App_main__3ZkGI"}},47:function(e){e.exports=JSON.parse('{"ABI version":2,"header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"ownerKeys","type":"uint256[]"}],"outputs":[]},{"name":"deployUAX","inputs":[{"components":[{"name":"code","type":"cell"},{"name":"tons","type":"uint16"},{"name":"name","type":"bytes"}],"name":"medium","type":"tuple"},{"components":[{"name":"code","type":"cell"},{"name":"tons","type":"uint16"},{"name":"name","type":"bytes"}],"name":"owner","type":"tuple"},{"components":[{"name":"code","type":"cell"},{"name":"tons","type":"uint16"},{"name":"name","type":"bytes"}],"name":"wallet","type":"tuple"}],"outputs":[]},{"name":"deployReserve","inputs":[],"outputs":[]},{"name":"deployOwners","inputs":[],"outputs":[]},{"name":"deployTokenWalletsWithKeys","inputs":[{"name":"keys","type":"uint256[]"}],"outputs":[{"name":"addrs","type":"address[]"}]},{"name":"updateTonBalance","inputs":[{"name":"tonBalance","type":"uint64"}],"outputs":[]},{"name":"updateRefillConfig","inputs":[{"name":"initialBalance","type":"uint64"},{"name":"warnBalance","type":"uint64"},{"name":"refillValue","type":"uint64"},{"name":"updateTimeout","type":"uint32"}],"outputs":[]},{"name":"initMember","inputs":[{"name":"id","type":"uint16"},{"name":"root","type":"address"},{"name":"medium","type":"address"}],"outputs":[]},{"name":"_id","inputs":[],"outputs":[{"name":"_id","type":"uint16"}]},{"name":"_root","inputs":[],"outputs":[{"name":"_root","type":"address"}]},{"name":"_medium","inputs":[],"outputs":[{"name":"_medium","type":"address"}]},{"name":"_clients","inputs":[],"outputs":[{"name":"_clients","type":"map(address,uint16)"}]},{"name":"images","inputs":[],"outputs":[{"components":[{"name":"code","type":"cell"},{"name":"tons","type":"uint16"},{"name":"name","type":"bytes"}],"name":"images","type":"map(uint8,tuple)"}]},{"name":"_roster","inputs":[],"outputs":[{"components":[{"name":"id","type":"uint16"},{"name":"tonBalance","type":"uint128"},{"name":"key","type":"uint256"},{"name":"createdAt","type":"uint32"},{"name":"updatedAt","type":"uint32"}],"name":"_roster","type":"map(address,tuple)"}]}],"data":[{"key":1,"name":"_version","type":"uint16"},{"key":2,"name":"_deployer","type":"address"}],"events":[]}')},48:function(e){e.exports=JSON.parse('{"ABI version":2,"header":["pubkey","time","expire"],"functions":[{"name":"registerTokenWallet","inputs":[{"name":"id","type":"uint16"}],"outputs":[]},{"name":"registerOwner","inputs":[{"name":"id","type":"uint16"},{"name":"walletId","type":"uint16"},{"name":"walletAddress","type":"address"}],"outputs":[]},{"name":"requestTransfer","inputs":[{"name":"to","type":"address"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"processTransfer","inputs":[{"name":"to","type":"address"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"accrue","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"updateTransferFee","inputs":[{"name":"val","type":"uint8"}],"outputs":[]},{"name":"claimTransferFee","inputs":[{"name":"id","type":"uint16"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"mint","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"burn","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"withdraw","inputs":[{"name":"id","type":"uint16"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"approve","inputs":[{"name":"eventID","type":"uint32"}],"outputs":[]},{"name":"reject","inputs":[{"name":"eventID","type":"uint32"}],"outputs":[]},{"name":"propose","inputs":[{"name":"eType","type":"uint8"},{"name":"value","type":"uint32"}],"outputs":[]},{"name":"commit","inputs":[{"name":"eventID","type":"uint32"},{"name":"st","type":"uint8"}],"outputs":[]},{"name":"notifyOwners","inputs":[{"components":[{"name":"id","type":"uint32"},{"name":"eType","type":"uint8"},{"name":"state","type":"uint8"},{"name":"createdAt","type":"uint32"}],"name":"e","type":"tuple"}],"outputs":[]},{"name":"supplyImproved","inputs":[],"outputs":[{"name":"twTotal","type":"uint32"},{"name":"owTotal","type":"uint32"},{"name":"feeTotal","type":"uint32"},{"name":"unallocated","type":"uint32"}]},{"name":"getStats","inputs":[],"outputs":[{"name":"transfers","type":"uint32"},{"name":"supply","type":"uint32"},{"name":"wallets","type":"uint32"},{"name":"transferFee","type":"uint8"},{"name":"accruedFee","type":"uint32"},{"name":"totalFeeClaimed","type":"uint32"}]},{"name":"initMember","inputs":[{"name":"id","type":"uint16"},{"name":"root","type":"address"},{"name":"medium","type":"address"}],"outputs":[]},{"name":"constructor","inputs":[],"outputs":[]},{"name":"_id","inputs":[],"outputs":[{"name":"_id","type":"uint16"}]},{"name":"_root","inputs":[],"outputs":[{"name":"_root","type":"address"}]},{"name":"_medium","inputs":[],"outputs":[{"name":"_medium","type":"address"}]},{"name":"_clients","inputs":[],"outputs":[{"name":"_clients","type":"map(address,uint16)"}]},{"name":"_proposals","inputs":[],"outputs":[{"components":[{"name":"id","type":"uint32"},{"name":"eType","type":"uint8"},{"name":"createdAt","type":"uint32"},{"name":"expireAt","type":"uint32"},{"name":"resolvedAt","type":"uint32"},{"name":"state","type":"uint8"},{"name":"signsAt","type":"uint8"},{"name":"signsMask","type":"uint16"},{"name":"signsReq","type":"uint8"},{"name":"value","type":"uint32"},{"name":"actor","type":"uint16"}],"name":"_proposals","type":"map(uint32,tuple)"}]},{"name":"_currentEvent","inputs":[],"outputs":[{"components":[{"name":"id","type":"uint32"},{"name":"eType","type":"uint8"},{"name":"state","type":"uint8"},{"name":"createdAt","type":"uint32"}],"name":"_currentEvent","type":"tuple"}]},{"name":"_ledger","inputs":[],"outputs":[{"components":[{"name":"balance","type":"uint32"},{"name":"addr","type":"address"},{"name":"lastAccessed","type":"uint32"}],"name":"_ledger","type":"map(uint16,tuple)"}]},{"name":"_owners","inputs":[],"outputs":[{"components":[{"name":"clientId","type":"uint16"},{"name":"tokenWalletId","type":"uint16"},{"name":"addr","type":"address"},{"name":"tokenWalletAddr","type":"address"},{"name":"createdAt","type":"uint32"}],"name":"_owners","type":"map(uint8,tuple)"}]}],"data":[],"events":[]}')},49:function(e){e.exports=JSON.parse('{"ABI version":2,"header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"id","type":"uint16"},{"name":"medium","type":"address"}],"outputs":[]},{"name":"collect","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"incur","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"abort","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"withdraw","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"pay","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"debit","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"credit","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"donate","inputs":[{"name":"val","type":"uint32"}],"outputs":[]},{"name":"transferTokens","inputs":[{"name":"to","type":"address"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"instantTransfer","inputs":[{"name":"to","type":"address"},{"name":"val","type":"uint32"}],"outputs":[]},{"name":"getFinances","inputs":[],"outputs":[{"name":"id","type":"uint32"},{"name":"balance","type":"uint32"},{"name":"accountsPayable","type":"uint32"},{"name":"accountsReceivable","type":"uint32"},{"name":"actualBalance","type":"uint32"}]},{"name":"initMember","inputs":[{"name":"id","type":"uint16"},{"name":"root","type":"address"},{"name":"medium","type":"address"}],"outputs":[]},{"name":"_id","inputs":[],"outputs":[{"name":"_id","type":"uint16"}]},{"name":"_root","inputs":[],"outputs":[{"name":"_root","type":"address"}]},{"name":"_medium","inputs":[],"outputs":[{"name":"_medium","type":"address"}]},{"name":"_clients","inputs":[],"outputs":[{"name":"_clients","type":"map(address,uint16)"}]}],"data":[],"events":[]}')},50:function(e){e.exports=JSON.parse('{"ABI version":2,"header":["pubkey","time","expire"],"functions":[{"name":"constructor","inputs":[{"name":"id","type":"uint16"},{"name":"medium","type":"address"},{"name":"walletId","type":"uint16"},{"name":"walletAddress","type":"address"}],"outputs":[]},{"name":"approve","inputs":[{"name":"id","type":"uint32"}],"outputs":[]},{"name":"reject","inputs":[{"name":"id","type":"uint32"}],"outputs":[]},{"name":"propose","inputs":[{"name":"eType","type":"uint8"},{"name":"value","type":"uint32"}],"outputs":[]},{"name":"updateEventState","inputs":[{"name":"id","type":"uint32"},{"name":"state","type":"uint8"}],"outputs":[]},{"name":"getInfo","inputs":[],"outputs":[{"name":"id","type":"uint16"},{"name":"pubkey","type":"uint256"},{"name":"tokenWalletAddress","type":"address"}]},{"name":"initMember","inputs":[{"name":"id","type":"uint16"},{"name":"root","type":"address"},{"name":"medium","type":"address"}],"outputs":[]},{"name":"_id","inputs":[],"outputs":[{"name":"_id","type":"uint16"}]},{"name":"_root","inputs":[],"outputs":[{"name":"_root","type":"address"}]},{"name":"_medium","inputs":[],"outputs":[{"name":"_medium","type":"address"}]},{"name":"_clients","inputs":[],"outputs":[{"name":"_clients","type":"map(address,uint16)"}]},{"name":"_events","inputs":[],"outputs":[{"name":"_events","type":"map(uint32,uint8)"}]}],"data":[],"events":[]}')},53:function(e,t,n){e.exports={loader:"Loader_loader__1j2Bs"}},55:function(e,t,n){e.exports={button:"AdminBtn_button__1CAug"}},57:function(e,t,n){},58:function(e,t,n){},7:function(e,t,n){e.exports={main:"Header_main__2r9vH",logo:"Header_logo__3_SJs",logoImage:"Header_logoImage__2KwYz",title:"Header_title__3SH2Q",menu:"Header_menu__BQHSW",link:"Header_link__2wI74",active:"Header_active__vmCnS Header_link__2wI74",act:"Header_act__1iRYG"}},8:function(e){e.exports=JSON.parse('{"contracts":{"Repo":"0:bb5b583522d3f9440a8b65b3738303a3b68b8c9d9978a2d2c95749e6b7153ceb","Root":"0:aaa1a9fd73858d1504045237558b3d9f602cf617f79f8449f010272ec009e35f","Medium":"0:5f8277983d346affa885a8270b18321a452927e37c7c75f1dcb6660e793261d7"},"owners":[{"keys":{"public":"297968f88c98c6c03340f22cc65d2204f51500b5ad765c2d7aa7aec5022edda3","secret":"83e7af79932e7d85465ddf5b754c2b763d32ecca7965553c7a0061ac31c142c5"},"addr":"0:a1751019c5c3f620430f9186fa5e11ee9842c8b8bead3ef450e397129b07d22b","wallet":"0:cdb47c563057ecebffe13b19a97ed4d498d6d0edd926d5d51bfdfcf6e5a60b3e"},{"keys":{"public":"f22d912600aa700d048cf1cf777d0915dcb3b9962c7ebd04808da4554f553cfc","secret":"121cd05215630f799ddd35db0d7ad1d805cdb76c091ad85b97d17b9a05ad1cdf"},"addr":"0:c09fdfd16cab4e79d1614fef8f40bb87f5836842636c9bcfa70d1248bf18472e","wallet":"0:54b14e7b9421314c9b03435d3635f910cb8951f310041e1a06118ecf434aea90"},{"keys":{"public":"d812b2bb6a7101e27adb3af99d52eb1b1398fdfb3033b594001ffd1d4df0c75a","secret":"3423f22667d4914a1d60c14e20262e8bba496a0b7784e39a8f4c4dbda846737d"},"addr":"0:daa3c3fe9a86558de31de3a315f3b7bfe361761f9d4d73b39a6a55eb55fcc85b","wallet":"0:874357226ad42a5be22da8cfdedc179f03ed617b2ea99c83464254df10b157bc"}],"users":[{"keys":{"public":"1942a0ee1b4d63ca663e2178b4245617b5cb84589b66b8cdfcc291babfd7b1fb","secret":"e5487ae92125e78923d0f9a12bb706dc9e4c9a1247ffcc39d745a20406b4552f"},"addr":"0:f0beb6f2cd9489ea04ff1286c6c0f303f1cfadb6f7a0f250c92f269b7db80e0a"},{"keys":{"public":"a14a4818bd92c7a0e7c365682cb5705ce4b14a4af8152b2746f3ae34facba822","secret":"a2458ab381a13f81236565e5200dc80989291721295543efabd0bf8dbaf5c5f4"},"addr":"0:85110c207ae0dc59e3ebf1a894008872fbd48e96726aa1e9738ee1671e513290"}],"network":"main"}')},89:function(e,t,n){"use strict";n.r(t);n(56),n(57),n(58);var a=n(1),s=n.n(a),r=n(44),c=n.n(r),u=n(15),i=n(25),o=n.n(i),d=n(5),p=n(7),l=n.n(p),m=n.p+"static/media/logo.240b99fe.svg",b=n(0);var j=function(){return Object(b.jsxs)("header",{className:l.a.main,children:[Object(b.jsx)("div",{className:l.a.logo,children:Object(b.jsx)("h1",{children:Object(b.jsxs)(u.b,{to:"/",className:l.a.title,children:[Object(b.jsx)("img",{className:l.a.logoImage,src:m,alt:"logo",width:"30px"}),"UAX"]})})}),Object(b.jsxs)("div",{className:l.a.menu,children:[Object(b.jsx)(u.c,{to:"/user",className:l.a.link,activeClassName:l.a.active,children:"User-User"}),Object(b.jsx)(u.c,{to:"/owner/1",className:l.a.link,activeClassName:l.a.active,children:"Owner 1"}),Object(b.jsx)(u.c,{to:"/owner/2",className:l.a.link,activeClassName:l.a.active,children:"Owner 2"}),Object(b.jsx)(u.c,{to:"/owner/3",className:l.a.link,activeClassName:l.a.active,children:"Owner 3"}),Object(b.jsx)(u.c,{to:"/dev",className:l.a.link,activeClassName:l.a.active,children:"Don't touch"})]})]})},f=n(2),O=n(3),v=n(4),y=n(90),x=n(93),h=n(91),_=n(92),w=n(51),g=n(46),k=n(21);function N(e,t){return A.apply(this,arguments)}function A(){return A=Object(O.a)(Object(f.a)().mark((function e(t,n){var a,s=arguments;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,t.runLocal(n,a);case 3:return e.abrupt("return",e.sent.decoded.output);case 4:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(O.a)(Object(f.a)().mark((function e(t,n){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.runLocal(n,{});case 2:return e.t0=n,e.abrupt("return",e.sent.decoded.output[e.t0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n,a){return new g.Account({abi:n},{address:t,client:e,signer:a?Object(k.signerKeys)(a):null})}function C(){return(C=Object(O.a)(Object(f.a)().mark((function e(t,n){var a,s,r,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(n,"getStats");case 2:return a=e.sent,e.next=5,N(n,"supplyImproved");case 5:return s=e.sent,e.next=8,B(t);case 8:return r=e.sent,c=Object.values(s).reduce((function(e,t){return Number(e)+Number(t)})),e.abrupt("return",{wallets:a.wallets,transfers:a.transfers,transferFee:a.transferFee,supply:c,supplyBreakdown:s,claimedFee:a.totalFeeClaimed,accruedFee:a.accruedFee,tons:r.toString()});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(){var e=Object(O.a)(Object(f.a)().mark((function e(t){var n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,"getFinances");case 2:return n=e.sent,e.abrupt("return",n.balance);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(Object(f.a)().mark((function e(t){var n;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBalance();case 2:return n=e.sent,e.abrupt("return",+(parseInt(n,16)/Math.pow(10,9)).toFixed(2));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R={getStats:function(e,t){return C.apply(this,arguments)},getUAXBalance:M,getTONBalance:B},I=R,U=n(12),W=n(35),H=n(47),L=n(48),P=n(49),X=n(50),E=n(8),V=E.users[0].addr,D=E.users[1].addr,q=E.contracts.Root,J=E.contracts.Medium,K={Root:H,Medium:L,TokenWallet:P,OwnerWallet:X};Object(W.b)({binaryURL:"/web/tonclient.wasm"}),k.TonClient.useBinaryLibrary(W.a);var G={main:"https://mainnet.evercloud.dev/7a0c75a081cb45309f6fdee852819fdb",dev:"https://net.ton.dev",se:"http://localhost"},Q=Object(a.createContext)(),Y=function(e){var t=new k.TonClient({network:{server_address:G[E.network]}}),n={Root:F(t,q,K.Root),Medium:F(t,J,K.Medium)},a=Object(w.a)(Object(O.a)(Object(f.a)().mark((function e(){var n,a,s,r,c,u,i,o,d,p,l;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n={1:E.owners[0].keys,2:E.owners[1].keys,3:E.owners[2].keys},a={},s=0,r=Object.entries(n);s<r.length;s++)c=Object(v.a)(r[s],2),u=c[0],i=c[1],o=E.owners[u-1].addr,d=E.owners[u-1].wallet,p=F(t,o,K.OwnerWallet,i),l=F(t,d,K.TokenWallet,i),a[u]={contract:p,wallet:l};return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),[]);var s=Object(U.a)(Object(U.a)(Object(U.a)({},Object.fromEntries(Object.entries(E.contracts).map((function(e){var t=Object(v.a)(e,2),n=t[0];return[t[1],n]})))),Object.fromEntries(E.owners.map((function(e,t){return[e.addr,"o".concat(t+1)]})))),Object.fromEntries(E.owners.map((function(e,t){return[e.wallet,"o".concat(t+1,"w")]}))));return Object(b.jsx)(Q.Provider,{value:{ton:t,UAXSystem:n,UAXOwners:a,UAXSystemMap:s,UAXOwner:function(e){var t=e.idx,n=e.twAddr,s=a.value;if(!a.loading){if(void 0!==t)return s[t];if(void 0!==n)for(var r=0,c=Object.values(s);r<c.length;r++){var u=c[r];if(u.wallet.address===n)return u}}},UAXUser:function(e){var n,a;return 1==e?(n=V,a=E.users[0].keys):2==e&&(n=D,a=E.users[0].keys),F(t,n,K.TokenWallet,a)}},children:e.children})};function z(){return Object(a.useContext)(Q).UAXSystem}function Z(e){var t=(0,Object(a.useContext)(Q).UAXUser)(e);return Object(a.useEffect)((function(){return function(){t&&t.free()}}),[t]),t}var $=function(){var e=z(),t=Object(a.useContext)(Q).UAXSystemMap,n=Object(y.a)({}),s=Object(v.a)(n,2),r=s[0],c=s[1],u=c.set,i=c.reset,o=Object(a.useCallback)((function(e){"c"===e.key&&i()}),[]);Object(x.a)("keydown",o);var d=Object(h.a)(Object(O.a)(Object(f.a)().mark((function t(){var n,a,s;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e.Medium,"_currentEvent");case 2:return n=t.sent,t.next=5,S(e.Medium,"_proposals");case 5:return a=t.sent,s=a[n.id],t.abrupt("return",{e:n,proposal:s});case 8:case"end":return t.stop()}}),t)}))),[r.length]);function p(e){return"object"==typeof e?Object.entries(e).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{children:n}),":",Object(b.jsx)("span",{children:[Object,Array].includes(typeof a)?JSON.stringify(a):a})]})})):e}return Object(_.a)((function(){d.loading||d.retry()}),1e3),Object(w.a)(Object(O.a)(Object(f.a)().mark((function n(){return Object(f.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.Medium.subscribeMessages("id,created_at,boc,src,dst",function(){var n=Object(O.a)(Object(f.a)().mark((function n(a){var s,r,c;return Object(f.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.Medium.decodeMessage(a.boc);case 2:s=n.sent,r=t[a.src]||a.src.slice(5),c=t[a.dst]||a.dst.slice(5),u(a.id,{t:new Date(1e3*a.created_at).toLocaleTimeString(),src:r,dst:c,name:s.name,params:s.value});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)}))),[]),Object(b.jsxs)("section",{children:[Object(b.jsx)("h2",{children:"Debugging Reserve Contract"}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"State"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Time"})," ",(new Date).toLocaleTimeString()," (",Math.floor((new Date).getTime()/1e3),")"]}),d.value&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Current Proposal Header"}),p(d.value.e)]}),d.value.e.id>0&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:["Proposal #",d.value.e.id]}),p(d.value.proposal)]})]})]}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"Messages (aka calls)"}),Object(b.jsx)("small",{children:"Press 'c' to clear"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object.entries(r).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{children:"(".concat(n.slice(0,5),") [").concat(a.t,"] ")}),Object(b.jsx)("span",{children:"".concat(a.src," -> ").concat(a.dst)}),Object(b.jsx)("br",{}),Object(b.jsx)("b",{children:a.name}),Object.entries(a.params).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)(b.Fragment,{children:[" ",Object(b.jsx)("i",{children:n}),": ",Object(b.jsx)("span",{children:p(a)})]})}))]})}))]})]})]})},ee=n(14),te=n.n(ee),ne=n(53),ae=n.n(ne);var se=function(e){var t=e.color,n=e.width,a=void 0===n?20:n;return Object(b.jsx)("div",{className:"".concat(ae.a.loader," i-cycle i-rotate"),style:{width:a,fontSize:a,color:t}})},re=n(94),ce=n(52);function ue(e){var t=e.address,n=e.children,a=Object(re.a)(),s=Object(v.a)(a,2)[1];return Object(b.jsx)("div",{className:"".concat(te.a.yadd," i-copy"),onClick:function(){return s(t)},children:n})}var ie=function(e){var t=e.label,n=e.account,s=Object(a.useState)(""),r=Object(v.a)(s,2),c=r[0],u=r[1],i=Object(a.useState)(""),o=Object(v.a)(i,2),d=o[0],p=o[1];Object(w.a)(Object(O.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.getUAXBalance(n).then(u),I.getTONBalance(n).then(p),e.next=4,n.subscribeMessages("id,boc",(function(e){n.refresh(),console.log("Wallet.onMessage",Date.now().toLocaleString()),I.getUAXBalance(n).then(u),I.getTONBalance(n).then(p)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),[n]);var l=Object(a.useRef)(),m=Object(a.useRef)(),j=Object(ce.a)(function(){var e=Object(O.a)(Object(f.a)().mark((function e(t){var a,s,r;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=l.current.value,s=Number(m.current.value),a.match(/^0:[a-fA-F0-9]{64}$/)&&Number.isInteger(s)&&s>0){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.run("transferTokens",{to:a,val:s});case 8:return r=e.sent,console.log("Transaction Sent (".concat(n.address,") to=").concat(a," val=").concat(s),r),l.current.value="",m.current.value="",e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),[n]),y=Object(v.a)(j,2),x=y[0],h=y[1],_=n.address,g=_.slice(0,11)+" ... "+_.slice(-9),k=Object(b.jsx)("button",{className:te.a.buttonLoading,children:Object(b.jsx)(se,{})}),N=Object(b.jsx)("button",{className:te.a.button,onClick:h,children:"Send"});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{className:"i-card",children:"Wallet"}),Object(b.jsx)("div",{className:te.a.spacer}),Object(b.jsxs)("div",{className:te.a.wallet,children:[Object(b.jsx)("p",{className:te.a.info,children:t}),Object(b.jsxs)("div",{className:te.a.value,children:[Object(b.jsx)("p",{className:"i-uax",children:c}),Object(b.jsx)("p",{className:"i-gas",children:d})]})]}),Object(b.jsx)(ue,{address:_,children:g}),Object(b.jsx)("h3",{className:"i-path",children:"Transfer"}),Object(b.jsxs)("form",{className:te.a.block,children:[Object(b.jsx)("input",{className:te.a.input,type:"text",placeholder:"Address (0:...)",ref:l}),Object(b.jsx)("input",{className:te.a.input,type:"text",placeholder:"Amount",ref:m}),x.loading?k:N]})]})};var oe=function(){var e=Z(1),t=Z(2);return Object(b.jsxs)("section",{children:[Object(b.jsx)("h2",{children:"User Wallet Demo"}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(ie,{label:"User 1",account:e})}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(ie,{label:"User 2",account:t})})]})]})},de=n(30),pe=n(20),le=n.n(pe);function me(e){var t=e.account,n=e.method,s=e.argName,r=e.otherArgs,c=void 0===r?{}:r,u=e.inputHint,i=void 0===u?"Positive integer value":u,o=e.buttonCaption,d=void 0===o?"Send Message":o,p=Object(a.useRef)(),l=Object(ce.a)(function(){var e=Object(O.a)(Object(f.a)().mark((function e(a){var r,u;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,r=Number(p.current.value),Number.isInteger(r)&&!(r<=0)){e.next=5;break}return e.abrupt("return");case 5:return console.log(t),e.next=8,t.run(n,Object(U.a)(Object(de.a)({},s,r),c));case 8:return u=e.sent,p.current.value="",console.log("Proposal Sent (".concat(t.address,") params=").concat(JSON.stringify(c)," value=").concat(r),u),e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,s,c]),m=Object(v.a)(l,2),j=m[0],y=m[1],x=Object(b.jsx)("button",{className:le.a.buttonLoading,children:Object(b.jsx)(se,{})}),h=Object(b.jsx)("button",{className:le.a.button,onClick:y,children:d});return Object(b.jsxs)("form",{className:le.a.block,children:[Object(b.jsx)("input",{className:le.a.input,type:"text",placeholder:i,ref:p}),j.loading?x:h]})}var be=function(e){var t=e.owner,n=e.wallet,a={argName:"value",method:"propose",account:t},s={mint:Object(U.a)({otherArgs:{eType:1},inputHint:"Mint to Reserve",buttonCaption:"Mint"},a),burn:Object(U.a)({otherArgs:{eType:2},inputHint:"Burn from Reserve",buttonCaption:"Burn"},a),lock:{account:n,method:"donate",argName:"val",inputHint:"Lock to Reserve",buttonCaption:"Lock"},pull:Object(U.a)({otherArgs:{eType:3},inputHint:"Unlock from Reserve",buttonCaption:"Unlock"},a),updfee:Object(U.a)({otherArgs:{eType:4},inputHint:"Update Fee",buttonCaption:"Update Fee"},a),harvest:Object(U.a)({otherArgs:{eType:5},inputHint:"Harvest Fee",buttonCaption:"Harvest Fee"},a)};function r(e){var t=s[e];return t&&Object(b.jsx)(me,Object(U.a)({},t))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{className:"i-chem",children:"UAX Reserve Operations"}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"flex ".concat(le.a.twoforms),children:[r("mint")," ",r("burn")]}),Object(b.jsxs)("div",{className:"flex ".concat(le.a.twoforms),children:[r("lock")," ",r("pull")]})]}),Object(b.jsx)("h3",{className:"i-fee",children:"UAX Fee Operations"}),Object(b.jsxs)("div",{className:"flex",children:[r("updfee")," ",r("harvest")]})]})},je=n(17),fe=n.n(je);function Oe(e){if(!e)return"";var t=(e-new Date)/1e3;if(t<0)return"";var n=Math.floor(t/86400),a=Math.floor(t%86400/3600).toString().padStart(2,"0"),s=Math.floor(t%3600/60).toString().padStart(2,"0"),r=Math.floor(t%60).toString().padStart(2,"0");return"".concat(n," days ").concat(a,":").concat(s,":").concat(r)}var ve=function(e){var t=e.owner,n=e.proposal,s=(e.refresh,e.ownerAlreadyVoted),r=Object(a.useState)(n.expire),c=Object(v.a)(r,2),u=c[0],i=c[1],o=Object(a.useState)(Oe(u)),d=Object(v.a)(o,2),p=d[0],l=d[1],m=Object(a.useState)(null),j=Object(v.a)(m,2),y=j[0],x=j[1],h=Object(a.useState)(s),_=Object(v.a)(h,2),w=_[0],g=_[1];if(Object(a.useEffect)((function(){var e=setInterval((function(){l(Oe(u)),i(u-1e3)}),1e3);return function(){return clearInterval(e)}}),[]),!p)return null;var k="Owner ".concat(n.author),N="approve"===y?fe.a.buttonvoted:fe.a.button,A="reject"===y?fe.a.buttonvoted:fe.a.button;function S(e){return T.apply(this,arguments)}function T(){return(T=Object(O.a)(Object(f.a)().mark((function e(a){var s;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),x(s=a?"approve":"reject"),e.next=5,t.run(s,{id:n.id});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:fe.a.message,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("b",{children:k})," proposed to ",Object(b.jsx)("b",{children:{mint:"mint",burn:"burn",withdraw:"withdraw",setfee:"set transfer fee",claimfee:"withdraw fee"}[n.type]}),Object(b.jsx)("span",{className:"i-uax",children:n.value})]}),Object(b.jsxs)("span",{className:"i-cycle i-rotate",children:["Expire in ",p]}),Object(b.jsxs)("span",{className:"i-eye",children:["Signed: ",n.hasSigs,"/",n.reqSigs]}),Object(b.jsx)("div",{className:"".concat(N," ").concat(w?fe.a.buttondisabled:""),onClick:function(){return S(!0)},children:"approve"===y?Object(b.jsx)(se,{width:10}):"APPROVE"}),Object(b.jsx)("div",{className:"".concat(A," ").concat(w?fe.a.buttondisabled:""),onClick:function(){return S(!1)},children:"reject"===y?Object(b.jsx)(se,{width:10}):"REJECT"})]})},ye={Propose:be,Vote:ve},xe=2,he={1:"mint",2:"burn",3:"withdraw",4:"setfee",5:"claimfee"};function _e(e){return we.apply(this,arguments)}function we(){return(we=Object(O.a)(Object(f.a)().mark((function e(t){var n,a,s,r,c,u,i,o,d;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("---"),t.refresh(),e.next=4,S(t,"_currentEvent");case 4:if((n=e.sent).state==xe){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,S(t,"_proposals");case 9:for(a=e.sent,s=a[n.id],console.log("raw proposal",s),r=[],c=0,u=[0,1,2];c<u.length;c++)o=1<<(i=u[c]),s.signsMask&o&&r.push(i+1);return d={id:Number(s.id),type:he[s.eType],value:Number(s.value),created:new Date(1e3*s.createdAt),expire:new Date(1e3*s.expireAt),author:s.actor-1e4+1,ownersVoted:r,hasSigs:Number(s.signsAt),reqSigs:Number(s.signsReq)},console.log("parsed proposal",d),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(e){var t,n,s=e.idx,r=function(e){var t=e.idx,n=e.twAddr,s=(0,Object(a.useContext)(Q).UAXOwner)({idx:t,twAddr:n});return Object(a.useEffect)((function(){return function(){s&&(s.contract.free(),s.wallet.free())}}),[s]),[null===s||void 0===s?void 0:s.contract,null===s||void 0===s?void 0:s.wallet]}({idx:s}),c=Object(v.a)(r,2),u=c[0],i=c[1],o=z().Medium,d=Object(h.a)(Object(O.a)(Object(f.a)().mark((function e(){return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[]);console.log("render demo for o".concat(s,". contract: ").concat(null===u||void 0===u?void 0:u.address," tw: ").concat(null===i||void 0===i?void 0:i.address));var p=(null===(t=d.value)||void 0===t?void 0:t.author)===s,l=null===(n=d.value)||void 0===n?void 0:n.ownersVoted.includes(s),m=!d.loading&&d.value&&!p&&d.value.expire>new Date,j=Object(a.useCallback)(d.retry,[d]);return function(e,t,n,a){var s,r;Object(w.a)(Object(O.a)(Object(f.a)().mark((function t(){return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Owner.subscribe",(new Date).toLocaleString(),e.address),t.next=3,e.subscribe("messages",{src:{eq:n.address},dst:{eq:e.address},OR:{src:{eq:e.address},dst:{eq:n.address}}},"id,created_at,boc,src,dst",function(){var t=Object(O.a)(Object(f.a)().mark((function t(s){var r;return Object(f.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Owner.onMessage",(new Date).toLocaleString()),t.next=3,(s.dst==n.address?n:e).decodeMessage(s.boc);case 3:r=t.sent,console.log(s.dst==n.address?"medium":"owner","->",s.dst.slice(0,5),r.name,r.value),"updateEventState"==r.name&&a();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),[null===(s=t.value)||void 0===s?void 0:s.id,null===(r=t.value)||void 0===r?void 0:r.hasSigs,e,n])}(u,d,o,j),Object(b.jsxs)(b.Fragment,{children:[m&&Object(b.jsx)(ye.Vote,{owner:u,proposal:d.value,refresh:j,ownerAlreadyVoted:l}),u&&i&&Object(b.jsxs)("section",{children:[Object(b.jsxs)("h2",{children:["Owner ",s]}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(ye.Propose,{owner:u,wallet:i})}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(ie,{label:"OWNER ".concat(s),account:i})})]})]})]})},ke=n(16),Ne=n.n(ke);n(55);function Ae(e){var t=e.name,n=e.value,a=e.icon,s=e.children,r=e.child,c=null===n,u="".concat(Ne.a.value," ").concat(c?"i-cycle i-rotate ".concat(Ne.a.valueLoading):"");return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:Ne.a.statrow,children:[Object(b.jsx)("p",{className:r?Ne.a.childstatname:Ne.a.statname,children:t}),Object(b.jsx)("div",{className:"".concat(a," ").concat(Ne.a.unit)}),Object(b.jsx)("span",{className:u,children:!c&&n})]}),s]})}var Se=function(){var e=Object(a.useState)({supply:null,supplyBreakdown:{twTotal:null,owTotal:null,feeTotal:null,unallocated:null},wallets:null,transfers:null,transferFee:null,accruedFee:null,claimedFee:null,tons:null}),t=Object(v.a)(e,2),n=t[0],s=t[1],r=Object(a.useContext)(Q).UAXSystem;return Object(_.a)((function(){r.Root.refresh(),r.Medium.refresh(),I.getStats(r.Root,r.Medium).then(s)}),1e3),Object(b.jsx)("aside",{className:Ne.a.aside,children:Object(b.jsxs)("div",{className:Ne.a.stats,children:[Object(b.jsx)("h2",{children:"Statistics"}),Object(b.jsx)(Ae,{name:"Wallets",value:n.wallets}),Object(b.jsx)(Ae,{name:"Transfers",value:n.transfers}),Object(b.jsx)(Ae,{name:"TransferFee",value:n.transferFee,icon:"i-uax"}),Object(b.jsx)("br",{}),Object(b.jsxs)(Ae,{name:"Supply",value:n.supply,icon:"i-uax",children:[Object(b.jsx)(Ae,{child:!0,name:"Reserve",value:n.supplyBreakdown.unallocated}),Object(b.jsx)(Ae,{child:!0,name:"Circulating",value:n.supplyBreakdown.twTotal}),Object(b.jsx)(Ae,{child:!0,name:"CollectedFees",value:n.supplyBreakdown.feeTotal})]}),Object(b.jsx)("br",{}),Object(b.jsx)(Ae,{name:"ClaimedFee",value:n.claimedFee,icon:"i-uax"}),Object(b.jsx)(Ae,{name:"RemainingGas",value:n.tons,icon:"i-gas"})]})})};var Te=function(){return Object(b.jsx)("main",{className:o.a.wrapper,children:Object(b.jsxs)("div",{className:o.a.page,children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{className:o.a.main,children:[Object(b.jsx)(Se,{}),Object(b.jsx)("div",{className:o.a.desk,children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",children:"Hello world"}),Object(b.jsx)(d.a,{exact:!0,path:"/user",children:Object(b.jsx)(oe,{})}),Object(b.jsx)(d.a,{exact:!0,path:"/owner/1",children:Object(b.jsx)(ge,{idx:1})}),Object(b.jsx)(d.a,{exact:!0,path:"/owner/2",children:Object(b.jsx)(ge,{idx:2})}),Object(b.jsx)(d.a,{exact:!0,path:"/owner/3",children:Object(b.jsx)(ge,{idx:3})}),Object(b.jsx)(d.a,{exact:!0,path:"/dev",children:Object(b.jsx)($,{})})]})})]})]})})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(u.a,{children:Object(b.jsx)(Y,{children:Object(b.jsx)(Te,{})})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.60f34ecb.chunk.js.map